{% extends 'layout.html'%}

<style>
  .table-responsive {
    overflow-x: auto; /* Para que tenga scroll horizontal si es necesario */
}

.table th, .table td {
    white-space: nowrap; /* Evita que las columnas se rompan en varias líneas */
    text-align: center;   /* Centrar el contenido de las columnas */
}

h6 {
    font-size: 0.9rem;  /* Reduce ligeramente el tamaño del texto de los encabezados */
}

</style>

{% block content %}
<div class="container my-5">
  <div class="row">
    <div class="col">
      <div class="card w-100">
        <div class="card-header">Paso 1</div>
        <div class="card-body p-4 text-center">
          <h5 class="card-title fw-semibold mb-4">Cargar Archivo</h5>
          <form>
            <img src="{{ url_for('static', filename='/images/logos/excel.png') }}" class="mx-auto d-block my-5" alt="" style="width: 70px;">
            <input type="file" class="form-control mb-2" id="archivoInput"/>
            <input type="month" name="fecha" class="form-control my-3" id="periodoInput">
            <button class="btn btn-primary w-100" id="botonCargarArchivo">Cargar archivo</button>
            <!-- Barra de progreso -->
            <div class="progress mt-3">
              <div class="progress-bar" role="progressbar" style="width: 0%;" id="barraProgresoCarga" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="card w-100">
        <div class="card-header">Paso 2</div>
        <div class="card-body p-4 text-center">
          <h5 class="card-title fw-semibold mb-4">Procesar Archivos</h5>

          <h6 id="nombreArchivo"></h6>
          <form>
            <img src="{{ url_for('static', filename='/images/logos/validacion.png') }}" class="mx-auto d-block mb-2" alt="" style="width: 100px;">

            <button class="btn btn-primary w-100 my-3" id="botonProcesar">Procesar Excel</button>
            <p>Se crearan los archivos Csv y Txt</p>
            <!-- Barra de progreso -->
            <div class="progress mt-3">
              <div class="progress-bar" role="progressbar" style="width: 0%;" id="barraProgresoProcesar" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="card w-100">
        <div class="card-header">Paso 3</div>
        <div class="card-body p-4 text-center">
          <h5 class="card-title fw-semibold mb-4">Dar de baja Acepta</h5>
          <form>
            <img src="{{ url_for('static', filename='/images/logos/logo_acepta.png') }}" class="mx-auto d-block mb-2" alt="" style="width: 150px;">
            <button class="btn btn-primary w-100 my-3" id="botonBaja">Dar de Baja</button>
            <p>Se dara de baja en Acepta</p>
            <!-- Barra de progreso -->
            <div class="progress mt-3">
              <div class="progress-bar" role="progressbar" style="width: 0%;" id="barraProgresoBaja" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="card w-100">
        <div class="card-header">Paso 4</div>
        <div class="card-body p-4 text-center">
          <h5 class="card-title fw-semibold mb-4">Validar desde Sunat</h5>
          <form>
            <img src="{{ url_for('static', filename='/images/logos/logo_sunat.png') }}" class="mx-auto d-block mb-2" alt="" style="width: 150px;">
            <button class="btn btn-primary w-100 my-3" id="botonValidar">Validar</button>
            <p>Se realizara la validacion en Sunat</p>
            <!-- Barra de progreso -->
            <div class="progress mt-3">
              <div class="progress-bar" role="progressbar" style="width: 0%;" id="barraProgresoValidar" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>




  <!-- Resultados de las Validaciones -->
  <div class="row">
    <div class="card w-100">
        <div class="card-body p-4">
            <h5 class="card-title fw-semibold mb-4">Resultado de las validaciones en Sunat</h5>
            <div class="table-responsive">
                <table class="table text-nowrap table-striped table-bordered table-hover mb-0 align-middle" id="tableValidate">
                    <thead class="text-dark fs-4">
                        <tr>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Ruc</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Tipo Comp.</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Nro Comp.</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Fecha Emision</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Importe Total</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Estado Comp.</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Estado contribuyente</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Condicion domicilio</h6></th>
                            <th class="border-bottom-0"><h6 class="fw-semibold mb-0">Observaciones</h6></th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Aquí se llenarán los datos de la tabla -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


</div>



<!-- Modal Bot Acepta -->
<div class="modal fade" id="loadingModalAcepta" tabindex="-1" aria-labelledby="loadingModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center">
        <img src="{{ url_for('static', filename='images/logos/prealoader_acepta.jpg') }}" alt="Robot" class="mb-3" style="width: 450px;">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <h5 class="mt-3" id="txtLoadingAcepta">Cargando...</h5>
      </div>
    </div>
  </div>
</div>

<!-- Modal API Sunat -->
<div class="modal fade" id="loadingModalSunat" tabindex="-1" aria-labelledby="loadingModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center">
        <img src="{{ url_for('static', filename='images/logos/preloader_sunat.jpg') }}" alt="Robot" class="mb-3" style="width: 450px;">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <h5 class="mt-3" id="txtLoadingSunat">Cargando...</h5>
      </div>
    </div>
  </div>
</div>





{% endblock %}


{% block apps %}
<!-- Personalizado -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"/>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

<script src="{{ url_for('static', filename='js/pages/functionsLow.js') }}"></script>
{% endblock %}